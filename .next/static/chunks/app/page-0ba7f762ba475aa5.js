(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4721:function(e,t,a){Promise.resolve().then(a.bind(a,3772))},3772:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return W}});var r=a(7437),s=a(2265),l=a(3276),o=a(1094);let n="life-game-timer",i=()=>{let[e,t]=(0,s.useState)(0),[a,r]=(0,s.useState)(!1),[l,o]=(0,s.useState)(null),i=(0,s.useRef)(null);(0,s.useEffect)(()=>{try{let e=localStorage.getItem(n);if(e){let a=JSON.parse(e);if(a.isRunning&&a.lastStartTime){let e=Math.floor((Date.now()-a.lastStartTime)/1e3);t(a.seconds+e),r(!0),o(a.lastStartTime)}else t(a.seconds),r(!1),o(null)}}catch(e){console.error("Error loading timer state:",e)}},[]),(0,s.useEffect)(()=>{try{localStorage.setItem(n,JSON.stringify({seconds:e,isRunning:a,lastStartTime:l}))}catch(e){console.error("Error saving timer state:",e)}},[e,a,l]),(0,s.useEffect)(()=>(a?i.current=setInterval(()=>{t(e=>e+1)},1e3):i.current&&clearInterval(i.current),()=>{i.current&&clearInterval(i.current)}),[a]);let c=(0,s.useCallback)(()=>{r(!0),o(Date.now())},[]),d=(0,s.useCallback)(()=>{r(!1),o(null)},[]),m=(0,s.useCallback)(()=>{t(0),r(!1),o(null)},[]),g=(0,s.useCallback)(()=>{r(!1),o(null)},[]),u=(0,s.useCallback)(()=>{r(!0),o(Date.now())},[]),x=(0,s.useCallback)(e=>{t(Math.max(0,e))},[]),h=(0,s.useCallback)(e=>"".concat(Math.floor(e/3600).toString().padStart(2,"0"),":").concat(Math.floor(e%3600/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")),[]);return{seconds:e,isRunning:a,lastStartTime:l,start:c,stop:d,reset:m,pause:g,resume:u,setTime:x,formatTime:()=>h(e),clearTimerData:(0,s.useCallback)(()=>{localStorage.removeItem(n),t(0),r(!1),o(null)},[])}},c=e=>{let{onComplete:t,taskToContinue:a,categories:n}=e,{seconds:c,isRunning:d,start:m,stop:g,reset:u,formatTime:x}=i(),[h,f]=(0,s.useState)(""),b=!a,p=b?!!h:!!a;return(0,s.useEffect)(()=>{a&&f("")},[a]),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center max-w-md mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"text-6xl font-mono font-bold text-gray-800 mb-2",children:x()}),d?(0,r.jsx)("p",{className:"text-gray-600 h-10 flex items-center justify-center",children:(null==a?void 0:a.categoryName)||"Focusing..."}):a?(0,r.jsxs)("p",{className:"text-gray-600 h-10 flex items-center justify-center",children:["Ready to continue: “",a.categoryName,"”"]}):(0,r.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"block w-full text-center p-2 border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 h-10 bg-gray-50",children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"-- Select a category --"}),n.filter(e=>e.name).map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsx)("div",{className:"flex gap-4 justify-center",children:d?(0,r.jsxs)("button",{onClick:()=>{g(),c>0&&t(c,b?h:void 0),u(),f("")},className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-rose-600 text-white px-8 py-4 rounded-xl font-semibold transition-all duration-200 transform hover:scale-105 shadow-lg",children:[(0,r.jsx)(o.Z,{className:"w-5 h-5",fill:"currentColor"}),"Complete Task"]}):(0,r.jsxs)("button",{onClick:()=>{m()},disabled:!p,className:"flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-4 rounded-xl font-semibold transition-all duration-200 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100",children:[(0,r.jsx)(l.Z,{className:"w-5 h-5",fill:"currentColor"}),b?"Start Task":"Continue Task"]})})]})},d=[{name:"Bronze",minValue:0,maxValue:5,color:"text-amber-900",bgGradient:"from-yellow-400 via-amber-500 to-yellow-600",shadow:"shadow-amber-400/50",glow:"hover:shadow-amber-300/60"},{name:"Silver",minValue:5,maxValue:15,color:"text-slate-800",bgGradient:"from-slate-300 via-slate-400 to-slate-500",shadow:"shadow-slate-300/50",glow:"hover:shadow-slate-400/60"},{name:"Gold",minValue:15,maxValue:30,color:"text-yellow-900",bgGradient:"from-yellow-300 via-amber-400 to-yellow-500",shadow:"shadow-yellow-300/50",glow:"hover:shadow-yellow-400/60"},{name:"Diamond",minValue:30,maxValue:1/0,color:"text-sky-900",bgGradient:"from-cyan-300 via-sky-400 to-blue-500",shadow:"shadow-cyan-300/50",glow:"hover:shadow-cyan-400/60"}],m=e=>d.find(t=>e>=t.minValue&&e<t.maxValue)||d[0],g=e=>{let t=Math.floor(e/3600),a=Math.floor(e%3600/60);return t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a,"m")};var u=a(1723),x=a(6595);let h={rose:{bg:"bg-rose-100",text:"text-rose-800",shadow:"shadow-rose-300/50"},pink:{bg:"bg-pink-100",text:"text-pink-800",shadow:"shadow-pink-300/50"},fuchsia:{bg:"bg-fuchsia-100",text:"text-fuchsia-800",shadow:"shadow-fuchsia-300/50"},purple:{bg:"bg-purple-100",text:"text-purple-800",shadow:"shadow-purple-300/50"},violet:{bg:"bg-violet-100",text:"text-violet-800",shadow:"shadow-violet-300/50"},indigo:{bg:"bg-indigo-100",text:"text-indigo-800",shadow:"shadow-indigo-300/50"},blue:{bg:"bg-blue-100",text:"text-blue-800",shadow:"shadow-blue-300/50"},sky:{bg:"bg-sky-100",text:"text-sky-800",shadow:"shadow-sky-300/50"},cyan:{bg:"bg-cyan-100",text:"text-cyan-800",shadow:"shadow-cyan-300/50"},teal:{bg:"bg-teal-100",text:"text-teal-800",shadow:"shadow-teal-300/50"},emerald:{bg:"bg-emerald-100",text:"text-emerald-800",shadow:"shadow-emerald-300/50"},green:{bg:"bg-green-100",text:"text-green-800",shadow:"shadow-green-300/50"},lime:{bg:"bg-lime-100",text:"text-lime-800",shadow:"shadow-lime-300/50"},yellow:{bg:"bg-yellow-100",text:"text-yellow-800",shadow:"shadow-yellow-300/50"},amber:{bg:"bg-amber-100",text:"text-amber-800",shadow:"shadow-amber-300/50"},orange:{bg:"bg-orange-100",text:"text-orange-800",shadow:"shadow-orange-300/50"},red:{bg:"bg-red-100",text:"text-red-800",shadow:"shadow-red-300/50"},gray:{bg:"bg-gray-100",text:"text-gray-800",shadow:"shadow-gray-300/50"}};var f=a(1994),b=a(3335);function p(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,b.m6)((0,f.W)(t))}let y=e=>{let{task:t,category:a,onClick:s}=e,l=m(t.treasureValue),o=a?h[a.colorScheme]:h.gray;return(0,r.jsxs)("div",{onClick:s,className:p("\n        relative rounded-xl p-4 cursor-pointer transition-all duration-300 \n        hover:scale-105 hover:shadow-2xl transform hover:-translate-y-1 shadow-lg\n        group",o.bg,o.shadow),children:[(0,r.jsx)("div",{className:p("\n        absolute -top-2 -right-2 px-2 py-1 bg-white rounded-full \n        text-xs font-bold shadow-md group-hover:scale-110 transition-transform",o.text),children:l.name}),(0,r.jsxs)("div",{className:"text-center mb-3",children:[(0,r.jsx)("div",{className:p("text-2xl font-bold drop-shadow-lg",o.text),children:t.treasureValue}),(0,r.jsx)("div",{className:p("text-sm font-medium",o.text,"opacity-80"),children:"Treasure Value"})]}),(0,r.jsxs)("div",{className:p("bg-white/20 backdrop-blur-sm rounded-lg p-3",o.text),children:[(0,r.jsx)("p",{className:"text-sm font-medium truncate mb-2",children:t.categoryName}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(u.Z,{className:"w-3 h-3"}),g(t.duration)]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(x.Z,{className:"w-3 h-3",fill:"currentColor"}),t.score]})]})]}),(0,r.jsxs)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(0,r.jsx)("div",{className:p("absolute top-2 left-2 w-1 h-1 rounded-full animate-ping","bg-gray-100"===o.bg?"bg-gray-400":"bg-white")}),(0,r.jsx)("div",{className:p("absolute top-4 right-6 w-1 h-1 rounded-full animate-ping animation-delay-100","bg-gray-100"===o.bg?"bg-gray-400":"bg-white")}),(0,r.jsx)("div",{className:p("absolute bottom-6 left-6 w-1 h-1 rounded-full animate-ping animation-delay-200","bg-gray-100"===o.bg?"bg-gray-400":"bg-white")})]})]})},w=e=>{let{tasks:t,categories:a,onTaskClick:s}=e;return 0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFD4️"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Your treasure mountain is empty"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Complete your first task to get your first treasure!"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(e=>{let t=a.find(t=>t.id===e.categoryId)||null;return(0,r.jsx)(y,{task:e,category:t,onClick:()=>s(e)},e.id)})})};var v=a(8930),j=a(2489),N=a(1047);let S=e=>{let{isOpen:t,onClose:a,task:l,onDelete:o,onContinue:n,onDescriptionUpdate:i}=e,[c,d]=(0,s.useState)("");if((0,s.useEffect)(()=>{l&&d(l.description||"")},[l]),!t||!l)return null;let h=m(l.treasureValue);return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Task Details"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[o&&(0,r.jsx)("button",{onClick:()=>{o&&window.confirm("Are you sure you want to delete this task? This action cannot be undone.")&&(o(l.id),a())},className:"text-red-400 hover:text-red-600 transition-colors",title:"Delete Task",children:(0,r.jsx)(v.Z,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(j.Z,{className:"w-6 h-6"})})]})]}),(0,r.jsxs)("div",{className:"\n          bg-gradient-to-br ".concat(h.bgGradient," \n          rounded-xl p-6 mb-6 text-center relative overflow-hidden\n        "),children:[(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-white drop-shadow-lg mb-2",children:l.treasureValue}),(0,r.jsxs)("div",{className:"\n              inline-block px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full \n              text-white font-medium text-sm\n            ",children:[h.name," Treasure"]})]}),(0,r.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,r.jsx)("div",{className:"absolute top-2 left-4 w-2 h-2 bg-white rounded-full"}),(0,r.jsx)("div",{className:"absolute top-8 right-6 w-1 h-1 bg-white rounded-full"}),(0,r.jsx)("div",{className:"absolute bottom-4 left-8 w-1.5 h-1.5 bg-white rounded-full"}),(0,r.jsx)("div",{className:"absolute bottom-8 right-4 w-1 h-1 bg-white rounded-full"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Task Category"}),(0,r.jsx)("div",{className:"text-gray-800 bg-gray-50 rounded-lg p-3 font-medium",children:l.categoryName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Task Description"}),(0,r.jsx)("textarea",{value:c,onChange:e=>{d(e.target.value)},onBlur:()=>{l&&c!==l.description&&i(l.id,c)},className:"w-full text-gray-800 bg-gray-50 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-400",placeholder:"Add a description for your completed task...",rows:3})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Total Time Spent"})]}),(0,r.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:g(l.duration)})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Rating"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-800",children:l.score}),(0,r.jsx)("div",{className:"flex",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(x.Z,{className:"w-3 h-3 ".concat(t<l.score?"text-yellow-400":"text-gray-300"),fill:t<l.score?"currentColor":"none"},t))})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,r.jsxs)("h3",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{className:"text-xs font-medium",children:["Time Entries (",l.timeEntries.length,")"]})]}),(0,r.jsx)("div",{className:"space-y-2 max-h-24 overflow-y-auto pr-2",children:l.timeEntries.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-700",children:[(0,r.jsx)("span",{children:e.startTime.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,r.jsx)("span",{className:"font-semibold",children:g(e.duration)})]},t))})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,r.jsx)("button",{onClick:a,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-800 rounded-lg font-medium hover:bg-gray-300 transition-all duration-200",children:"Close"}),(0,r.jsx)("button",{onClick:()=>n(l),className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium hover:from-green-600 hover:to-emerald-700 transition-all duration-200",children:"Continue Task"})]})]})})};var k=a(8896),C=a(9474);let T=e=>{let{totalTasks:t,totalTime:a,averageScore:s,totalTreasureValue:l}=e,o=[{icon:k.Z,label:"Tasks Completed",value:t,suffix:"",color:"text-blue-600",bgColor:"bg-blue-50"},{icon:u.Z,label:"Focus Time",value:g(a),suffix:"",color:"text-green-600",bgColor:"bg-green-50"},{icon:x.Z,label:"Avg Rating",value:s.toFixed(1),suffix:"",color:"text-yellow-600",bgColor:"bg-yellow-50"},{icon:C.Z,label:"Treasure Value",value:l.toFixed(1),suffix:"",color:"text-purple-600",bgColor:"bg-purple-50"}];return(0,r.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:o.map((e,t)=>(0,r.jsxs)("div",{className:"".concat(e.bgColor," rounded-xl p-4 text-center"),children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-10 h-10 ".concat(e.color," bg-white rounded-lg mb-2"),children:(0,r.jsx)(e.icon,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"text-xl font-bold ".concat(e.color),children:[e.value,e.suffix]}),(0,r.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:e.label})]},t))})};var E=a(91),D=a(2735),I=a(7689),A=a(3639);class O{static set(e,t,a,r){try{let s={version:a||this.DEFAULT_VERSION,data:t,timestamp:Date.now(),expiresAt:r?Date.now()+r:void 0};return localStorage.setItem(e,JSON.stringify(s)),!0}catch(t){return console.error("Error saving to localStorage (".concat(e,"):"),t),!1}}static get(e,t){try{let a=localStorage.getItem(e);if(!a)return null;let r=JSON.parse(a);if(r.expiresAt&&Date.now()>r.expiresAt)return localStorage.removeItem(e),null;if(t&&r.version!==t)return console.warn("Version mismatch for ".concat(e,", clearing old data")),localStorage.removeItem(e),null;return r.data}catch(t){return console.error("Error reading from localStorage (".concat(e,"):"),t),null}}static remove(e){try{return localStorage.removeItem(e),!0}catch(t){return console.error("Error removing from localStorage (".concat(e,"):"),t),!1}}static has(e,t){try{let a=localStorage.getItem(e);if(!a)return!1;let r=JSON.parse(a);if(r.expiresAt&&Date.now()>r.expiresAt)return localStorage.removeItem(e),!1;if(t&&r.version!==t)return!1;return!0}catch(e){return!1}}static getUsageInfo(){try{let e=0;for(let t in localStorage)localStorage.hasOwnProperty(t)&&(e+=localStorage[t].length+t.length);let t=e/5242880*100;return{used:e,available:5242880,percentage:t}}catch(e){return{used:0,available:0,percentage:0}}}static clearAll(){try{let e=[];for(let t=0;t<localStorage.length;t++){let a=localStorage.key(t);a&&(a.startsWith("life-game-")||a.startsWith("life_game_"))&&e.push(a)}return e.forEach(e=>localStorage.removeItem(e)),!0}catch(e){return console.error("Error clearing localStorage:",e),!1}}static exportData(){try{let e={};for(let t=0;t<localStorage.length;t++){let a=localStorage.key(t);a&&(a.startsWith("life-game-")||a.startsWith("life_game_"))&&(e[a]=localStorage.getItem(a))}return JSON.stringify({version:this.DEFAULT_VERSION,timestamp:Date.now(),data:e},null,2)}catch(e){return console.error("Error exporting data:",e),""}}static importData(e){try{let t=JSON.parse(e);if(!t.data||"object"!=typeof t.data)throw Error("Invalid data format");return Object.entries(t.data).forEach(e=>{let[t,a]=e;"string"==typeof a&&localStorage.setItem(t,a)}),!0}catch(e){return console.error("Error importing data:",e),!1}}}O.DEFAULT_VERSION="1.0",O.DEFAULT_TTL=2592e6;let U={clearAll:()=>O.clearAll(),exportData:()=>O.exportData(),importData:e=>O.importData(e),getUsageInfo:()=>O.getUsageInfo()},V=e=>{let{isOpen:t,onClose:a,onDataChange:l}=e,[o,n]=(0,s.useState)(!1),[i,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(null),[g,u]=(0,s.useState)(()=>U.getUsageInfo());if(!t)return null;let x=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Settings"}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(j.Z,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)(E.Z,{className:"w-5 h-5"}),"Storage Usage"]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Used Space"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:x(g.used)})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(g.percentage>80?"bg-red-500":g.percentage>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(g.percentage,100),"%")}})}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:["Available: ",x(g.available)]}),(0,r.jsxs)("span",{children:[g.percentage.toFixed(1),"% used"]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Data Management"}),(0,r.jsxs)("button",{onClick:()=>{n(!0);try{let e=U.exportData();if(e){let t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="life-game-backup-".concat(new Date().toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(a)}}catch(e){console.error("Export failed:",e)}finally{n(!1)}},disabled:o,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,r.jsx)(D.Z,{className:"w-4 h-4"}),o?"Exporting...":"Export Data"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;c(!0),m(null);let r=new FileReader;r.onload=e=>{try{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;U.importData(a)?(l(),u(U.getUsageInfo()),alert("Data imported successfully!")):m("Failed to import data. Please check the file format.")}catch(e){m("Invalid file format. Please select a valid backup file.")}finally{c(!1)}},r.readAsText(a),e.target.value=""},className:"hidden",id:"import-file",disabled:i}),(0,r.jsxs)("label",{htmlFor:"import-file",className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors cursor-pointer ".concat(i?"opacity-50 cursor-not-allowed":""),children:[(0,r.jsx)(I.Z,{className:"w-4 h-4"}),i?"Importing...":"Import Data"]})]}),d&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[(0,r.jsx)(A.Z,{className:"w-4 h-4"}),d]}),(0,r.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to delete all data? This action cannot be undone.")&&(U.clearAll(),l(),u(U.getUsageInfo()),alert("All data has been cleared."))},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4"}),"Clear All Data"]})]}),(0,r.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,r.jsx)("strong",{children:"Note:"})," All data is stored locally in your browser. Export your data regularly to prevent loss."]})})]})})},Z="life-game-tasks",M=()=>{let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null);(0,s.useEffect)(()=>{(()=>{try{r(!0),o(null);let e=localStorage.getItem(Z);if(!e){t([]);return}let a=JSON.parse(e);if("1.1"!==a.version){console.warn("Storage version mismatch, clearing old data"),localStorage.removeItem(Z),t([]);return}let s=a.tasks.map(e=>{var t;return{...e,completedAt:new Date(e.completedAt),timeEntries:(null===(t=e.timeEntries)||void 0===t?void 0:t.map(e=>({...e,startTime:new Date(e.startTime),endTime:new Date(e.endTime)})))||[]}});t(s)}catch(e){console.error("Error loading tasks:",e),o("Failed to load saved tasks"),t([])}finally{r(!1)}})()},[]),(0,s.useEffect)(()=>{if(!a)try{let t={version:"1.1",tasks:e,lastUpdated:new Date().toISOString()};localStorage.setItem(Z,JSON.stringify(t))}catch(e){console.error("Error saving tasks:",e),o("Failed to save tasks")}},[e,a]);let n=(0,s.useCallback)((e,a,r)=>{let s=new Date,l={id:crypto.randomUUID(),categoryId:e.id,categoryName:e.name,description:"",duration:a,score:r,completedAt:s,treasureValue:Math.round(a/60*r/10*10)/10,timeEntries:[{startTime:new Date(s.getTime()-1e3*a),endTime:s,duration:a}]};return t(e=>[l,...e]),l},[]),i=(0,s.useCallback)((e,a)=>{t(t=>t.map(t=>t.id===e?{...t,description:a}:t))},[]),c=(0,s.useCallback)((e,a)=>{t(t=>t.map(t=>{if(t.id===e){let e=new Date,r={startTime:new Date(e.getTime()-1e3*a),endTime:e,duration:a};return{...t,duration:t.duration+a,completedAt:e,timeEntries:[...t.timeEntries,r]}}return t}))},[]),d=(0,s.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),m=(0,s.useCallback)((e,a)=>{t(t=>t.map(t=>t.id===e?{...t,...a}:t))},[]),g=(0,s.useCallback)(()=>{window.confirm("Are you sure you want to delete all tasks? This action cannot be undone.")&&(t([]),localStorage.removeItem(Z))},[]),u=(0,s.useCallback)(()=>{try{let t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download="life-game-tasks-".concat(new Date().toISOString().split("T")[0],".json"),s.click(),URL.revokeObjectURL(r)}catch(e){console.error("Error exporting tasks:",e),o("Failed to export tasks")}},[e]),x=(0,s.useCallback)(e=>{let a=new FileReader;a.onload=e=>{try{var a;let r=JSON.parse(null===(a=e.target)||void 0===a?void 0:a.result);if(Array.isArray(r)){let e=r.filter(e=>e.id&&e.description&&e.duration).map(e=>({...e,completedAt:new Date(e.completedAt)}));t(e),o(null)}else throw Error("Invalid file format")}catch(e){console.error("Error importing tasks:",e),o("Failed to import tasks. Please check the file format.")}},a.readAsText(e)},[]),h=(0,s.useCallback)(()=>{let t=e.length,a=e.reduce((e,t)=>e+t.duration,0),r=t>0?e.reduce((e,t)=>e+t.score,0)/t:0;return{totalTasks:t,totalTime:a,averageScore:Math.round(10*r)/10,totalTreasureValue:Math.round(10*e.reduce((e,t)=>e+t.treasureValue,0))/10}},[e]);return{tasks:e,addTask:n,updateTaskDescription:i,logTimeToTask:c,deleteTask:d,updateTask:m,clearAllTasks:g,exportTasks:u,importTasks:x,getStats:h,isLoading:a,error:l}};var F=a(7737),R=a(9934),L=a(8728),J=a(2252);let _=[{id:"1",name:"身体-头脑健康",colorScheme:"sky"},{id:"2",name:"NextJs(被动收入)",colorScheme:"lime"},{id:"3",name:"AI PM (主动收入)",colorScheme:"rose"},{id:"4",name:"当前工作（主动收入）",colorScheme:"green"},{id:"5",name:"个人成长（主动收入）",colorScheme:"indigo"},{id:"6",name:"亲密关系",colorScheme:"pink"},{id:"7",name:"娱乐与休闲",colorScheme:"fuchsia"},{id:"8",name:"",colorScheme:"gray"},{id:"9",name:"",colorScheme:"gray"}],B="task-categories";function G(){let[e,t]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e=localStorage.getItem(B);if(e){let a=JSON.parse(e);t(_.map(e=>{let t=a.find(t=>t.id===e.id);return t?{...e,...t}:e}))}else t(_)},[]),(0,s.useEffect)(()=>{e.length>0&&localStorage.setItem(B,JSON.stringify(e))},[e]),{categories:e,setCategories:t,updateCategory:function(e,a){t(t=>t.map(t=>t.id===e?{...t,name:a}:t))},resetCategories:function(){t(_)},updateCategoryColor:function(e,a){t(t=>t.map(t=>t.id===e?{...t,colorScheme:a}:t))}}}function z(e){let{categories:t,onCategoryChange:a,onSelect:s,selectedId:l,editable:o}=e;return(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4",children:t.map(e=>{let t=!o&&l===e.id;return o?(0,r.jsx)("div",{className:"aspect-square flex items-center justify-center p-2 rounded-lg bg-gray-100",children:(0,r.jsx)("textarea",{value:e.name,onChange:t=>null==a?void 0:a(e.id,t.target.value),className:"w-full h-full text-center bg-transparent focus:outline-none text-sm font-medium text-gray-700 resize-none flex items-center justify-center",placeholder:"Unnamed",rows:3})},e.id):(0,r.jsx)("button",{onClick:()=>null==s?void 0:s(e),disabled:!e.name,className:p("aspect-square flex items-center justify-center p-2 rounded-lg transition-all duration-200","text-sm font-medium text-center break-words",!e.name&&"bg-gray-50 cursor-not-allowed",e.name&&"bg-gray-100 hover:bg-indigo-100 hover:shadow-md",t&&"ring-2 ring-offset-2 ring-indigo-500 bg-indigo-100 text-indigo-800 shadow-lg"),children:e.name||"Empty"},e.id)})})}function P(e){let{isOpen:t,onClose:a}=e,{categories:l,setCategories:o,resetCategories:n}=G(),[i,c]=(0,s.useState)(l);return((0,s.useEffect)(()=>{t&&c(l)},[t,l]),t)?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Manage Categories"}),(0,r.jsx)(z,{categories:i,onCategoryChange:function(e,t){c(a=>a.map(a=>a.id===e?{...a,name:t}:a))},editable:!0}),(0,r.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,r.jsx)("button",{onClick:function(){n()},className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 transition-colors",children:"Reset to Default"}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:function(){o(i),a()},className:"px-6 py-2 rounded-lg text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition-colors",children:"Save"})]})]})]})}):null}function W(){let{tasks:e,addTask:t,deleteTask:a,logTimeToTask:l,getStats:o,isLoading:n,error:i,updateTaskDescription:d}=M(),{categories:m}=G(),[g,u]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[p,y]=(0,s.useState)(null),[v,j]=(0,s.useState)(null),N=o();return n?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading your treasure mountain..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"text-center mb-12 relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,r.jsx)(F.Z,{className:"w-10 h-10 text-indigo-600"}),(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Life is a Game"})]}),(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"Gamify your life, every task is a step towards the treasure mountain"}),(0,r.jsxs)("div",{className:"absolute top-0 right-0 flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>b(!0),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Manage Categories",children:(0,r.jsx)(R.Z,{className:"w-6 h-6"})}),(0,r.jsx)("button",{onClick:()=>h(!0),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Settings",children:(0,r.jsx)(L.Z,{className:"w-6 h-6"})})]})]}),i&&(0,r.jsxs)("div",{className:"mb-6 flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[(0,r.jsx)(J.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:i})]}),(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)(c,{onComplete:(e,a)=>{if(v)l(v.id,e),j(null);else if(a){let r=m.find(e=>e.id===a);r&&(y(t(r,e,1)),u(!0))}},taskToContinue:v,categories:m},(null==v?void 0:v.id)||"new-task")}),e.length>0&&(0,r.jsx)(T,{totalTasks:N.totalTasks,totalTime:N.totalTime,averageScore:N.averageScore,totalTreasureValue:N.totalTreasureValue}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)(F.Z,{className:"w-6 h-6 text-indigo-600"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"My Treasure Mountain"}),e.length>0&&(0,r.jsxs)("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium",children:[e.length," treasures"]})]}),(0,r.jsx)(w,{tasks:e,categories:m,onTaskClick:e=>{y(e),u(!0)}})]})]}),(0,r.jsx)(S,{isOpen:g,onClose:()=>u(!1),task:p,onDelete:e=>{a(e),u(!1)},onContinue:e=>{j(e),u(!1)},onDescriptionUpdate:(e,t)=>{d(e,t),p&&p.id===e&&y({...p,description:t})}}),(0,r.jsx)(V,{isOpen:x,onClose:()=>h(!1),onDataChange:()=>{window.location.reload()}}),(0,r.jsx)(P,{isOpen:f,onClose:()=>b(!1)})]})}}},function(e){e.O(0,[78,971,117,744],function(){return e(e.s=4721)}),_N_E=e.O()}]);